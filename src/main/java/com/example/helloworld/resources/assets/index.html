<html>
    <head>
        <style>
            .padded-div {
                padding: 10px;
            }
        </style>
    </head>
    <body>
        <div>
            <input type='text' id='text-input'/>
            <button style="display: inline-block;"
            onClick="clickHandler()">
                Convert
            </button>
            <div class = "padded-div" id='string-display'>
            </div>
            <div class = "padded-div" id = 'response'>
            </div>
        </div>
    </body>
    <script>
        function clickHandler() {
            let textInput = document.getElementById('text-input').value;
            fetch(`/api/convert?input=${textInput}`).then(
                res=>{
                    return res.text();
                }
            ).then(res=>{
                try {
                    res = JSON.parse(res);
                    document.getElementById('string-display').innerHTML = res.string;
                    document.getElementById('response').innerHTML = JSON.stringify(res);
                } catch {
                    document.getElementById('string-display').innerHTML = res;
                    document.getElementById('response').innerHTML = '';
                }
            }).catch(e=>{
                document.getElementById('string-display').innerHTML = '';
                document.getElementById('response').innerHTML = '';
            }
    </script>
</html>
